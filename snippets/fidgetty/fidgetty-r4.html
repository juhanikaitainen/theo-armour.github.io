<!doctype html>
<html lang = "en" >
<head>
<meta charset = "utf-8" >
<meta name = "viewport" content= "width=device-width, initial-scale=1" >
<meta name = "description" content = "Basic TooToo HTML template" >
<meta name = "keywords" content = "JavaScript,GitHub,FOSS" >
<meta name = "date" content = "2019-05-25" >
<meta name = "version" content = "0.0.0" >
<title></title>
<style>

	* { box-sizing: border-box; }

	:root { --mnu-width: 22rem; --screen-width: calc( 100vw ); --headerHeight: 6rem; }

	html { height: 100%; }

	body { font: 12pt monospace; margin: 0 auto; max-width: 800px; padding: 0 0.5rem; }

	a { color: crimson; text-decoration: none; }
	a:hover, a:focus, a:active { background-color: yellow; color: #aaa; text-decoration: underline }

	button, input[type=button] { background-color: #ddd; border-width: 0; color: #322; cursor: pointer; padding: 3px 5px; }
	button:hover { background: #ccc; color: #fff }

	.button { background-color: white; border-width: 1px; font-size: 24pt; }
	#clock, #countdown { font-size: 24pt; }

	#divFidgets { font-size: 48pt; }

	/*
	main { border: 0px; height: 100%; left: var( --mnu-width ); margin: 0;
		padding: 0 1rem; position: absolute; width: calc( 100% - var( --mnu-width ) );  }

	#navMenu { background-color: #eee; left: 0; margin: 0; padding: 0 1rem;
		position: absolute; top: 0; width: var( --mnu-width ); }
	*/

</style>
</head>
<body>

	<nav id="navMenu" >

		<div id="divTitle" ></div>

		<p>
			<button id=butSoundJay onclick=playRandomSoundJayButton(); >play random button sound</button>
		</p>

	</nav>

	<main>

		<div id="divContents" >


			<p>
				<button class=button onclick=stopNotices(); > Stop </button>
				<button class=button onclick=startNotices(); > Start </button>
			</p>

			<div id=clock ></div>

			<div id=countdown ></div>

			<div id=divFidgets ></div>

		</div>

	</main>


<script>

const fidgets = [

	"Ankle pumps",
	"Ankle circles",
	"Knee extension & flexion",
	"Rise alternates knees",
	"Push feet into the ground",
	"Head up and down to chest",
	"Roll shoulders",
	"Knees together and out",
	"Head between knees",
	"Turn from side to side",
	"Rotate hips",
	"Stretch arms up into air one at a time",
	"Grab arms behind shoulders",
	"Arch back",
	"Coccyx curl",
	"Wave arms to sides"

];

const sound1 = "https://www.soundjay.com/button/sounds/button-1.mp3";

aud = new Audio()
let startTime = Date.now();

const urlSourceCode = "https://github.com/theo-armour/theo-armour.github.io/tree/master/snippets/fidgetty";
const urlSourceCodeIcon = "https://pushme-pullyou.github.io/github-mark-64.png";

init();

function init() {

	divTitle.innerHTML = getTitle();

	playRandomFidget();

	startNotices();

}



function playSound( url ) {

	sound = new Audio( url )
	sound.play();

}



function playRandomSoundJayButton() {

	const number = Math.floor( 50 * Math.random() ) + 1;
	sound = new Audio( `https://www.soundjay.com/button/sounds/button-${ number }.mp3` );
	sound.play();

	butSoundJay.innerHTML = `Button Sound ${ number }`;

}



function playRandomFidget() {

	const number = Math.floor( fidgets.length * Math.random() );
	const text = fidgets[ number ];
	const thing = () => String.fromCharCode( 65 + Math.floor( 6 * Math.random()));

	r = thing();
	g = thing();
	b = thing();
	//console.log( '',  "#" + r + g + b );

	divFidgets.style.backgroundColor = "#" + r + g + b;
	divFidgets.innerHTML = text;

}



function startNotices() {

	startTime = Date.now();

	giveNotice();

	notices = setInterval( giveNotice, 1000 );

}


function stopNotices() {

	clearInterval( notices );

}


function giveNotice() {

	const date = new Date();

	clock.innerHTML = date.toLocaleTimeString();

	const now = Date.now();

	const delta = now - startTime;

	countdown.innerHTML = ( 301000 - delta ).toFixed().slice( 0, -3 ) ;

	//console.log( 'delta', delta );

	if ( delta > 300000 ) {

		playRandomSoundJayButton();

		playRandomFidget();

		startTime = now;

	}

}



function getTitle() {

	document.title = document.title ? document.title : location.href.split( '/' ).pop().slice( 0, - 5 ).replace( /-/g, ' ' );
	const version = document.head.querySelector( "[ name=version ]" ).content;

	const htm =
	`
		<h2>
			<a href=${ urlSourceCode } target=_top title="Source code on GitHub" >
				<img src=${ urlSourceCodeIcon } height=18 style=opacity:0.5; >
			</a>
			<a href="" title="Click to reload this page" >${ document.title }</a>
		</h2>

	`;

	return htm;

}

</script>
</body>
</html>